<section class="menu">
	<nav class="navbar navigation">
		<div class="container">
			<div class="navbar-header">
				<h2 class="menu-title">Main Menu</h2>
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
					aria-expanded="false" aria-controls="navbar">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>

			</div><!-- / .navbar-header -->

			<!-- Navbar Links -->
			<div id="navbar" class="navbar-collapse collapse text-center">
				<ul class="nav navbar-nav">
					<% @parent_categories.each do |parent_category| %>
						<li class="dropdown full-width dropdown-slide">
							<a href="#!" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-delay="350"
								role="button" aria-haspopup="true" aria-expanded="false"><%= parent_category.name %> <span
									class="tf-ion-ios-arrow-down"></span></a>
							<div class="dropdown-menu">
								<div class="row">
									<% child_categories_1 = Category.where('parent_id LIKE ? AND is_public = ?', "%#{ parent_category.id }", true).limit(4).offset(0).reject { |category| category.parent_id.split(',').length > 2 } %>
									<% child_categories_1.each do |child_category| %>
										<div class="col-sm-3 col-xs-12">
											<ul>
												<li class="dropdown-header"><%= child_category.name %></li>
												<li role="separator" class="divider"></li>
												<% grandchild_categories = Category.where('parent_id LIKE ? AND is_public = ?', "%#{ child_category.id }", true).reject { |category| category.parent_id.split(',').length > 3 } %>
												<% grandchild_categories.each do |category| %>
													<li><a href="<%= user_categories_path(id: category.id) %>"><%= category.name %></a></li>
												<% end %>
											</ul>
										</div>
									<% end %>
								</div>
								<div class="row mt-10">
								<% child_categories_2 = Category.where('parent_id LIKE ? AND is_public = ?', "%#{ parent_category.id }", true).limit(4).offset(4).reject { |category| category.parent_id.split(',').length > 2 } %>
									<% child_categories_2.each do |child_category| %>
										<div class="col-sm-3 col-xs-12">
											<ul>
												<li class="dropdown-header"><%= child_category.name %></li>
												<li role="separator" class="divider"></li>
												<% grandchild_categories = Category.where('parent_id LIKE ? AND is_public = ?', "%#{ child_category.id }", true).reject { |category| category.parent_id.split(',').length > 3 } %>
												<% grandchild_categories.each do |category| %>
													<li><a href="<%= user_categories_path(id: category.id) %>"><%= category.name %></a></li>
												<% end %>
											</ul>
										</div>
									<% end %>
								</div>
							</div><!-- / .dropdown-menu -->
						</li>
					<% end %>
				</ul><!-- / .nav .navbar-nav -->

			</div>
			<!--/.navbar-collapse -->
		</div><!-- / .container -->
	</nav>
</section>